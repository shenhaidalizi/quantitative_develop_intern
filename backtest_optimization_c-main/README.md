å†™åœ¨æœ€å‰é¢çš„readme
è¿™ä¸ªé¡¹ç›®å¯èƒ½ä¸ä¼šæœ‰äººçœ‹äº†ä½†æ˜¯è¿˜æ˜¯è¦å†™ä¸€ä¸‹ï¼Œè¯¥é¡¹ç›®è¯•éªŒäº†å¯¹äºæ”¹å†™core_engine.pyä¸­çš„å‡½æ•°çš„é€Ÿåº¦æµ‹è¯•ï¼›
é¦–å…ˆæˆ‘å¯¹core_engine.pyè¿›è¡Œäº†C++é‡æ„ï¼Œè¿›è¡Œäº†å®éªŒï¼Œå®éªŒæ•ˆæœå¾ˆå·®ï¼Œé€Ÿåº¦ä¸pythoné¡¹ç›®æƒ³å»å¾ˆè¿œå¾ˆè¿œï¼Œä¹‹åä¸€ç›´åœ¨è¿›è¡Œè¯•å›¾ä¼˜åŒ–ï¼Œä½†æ˜¯æœ€ç»ˆæ€§èƒ½ä¹Ÿæœªèƒ½è¶…è¶Špythonæ–‡ä»¶ï¼Œä¼˜åŒ–è·¯å¾„å¤§æ¦‚å¦‚ä¸‹ï¼š
é¦–å…ˆè°ƒç”¨eigen/denseåº“ï¼Œæ€§èƒ½æœ‰ä¼˜åŒ–ï¼Œç„¶åä½¿ç”¨openmpè¿›è¡Œå¹¶è¡Œå¤„ç†ï¼Œæ€§èƒ½è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œä¹‹åå°è¯•ä½¿ç”¨trickè¿›è¡ŒçŸ©é˜µåˆå§‹åŒ–ï¼Œæ€§èƒ½æœ‰æ­£å‘ä¼˜åŒ–ï¼Œä½†æ˜¯ä¸ºå¯¹åŸå¾ªç¯ä½“è¿›è¡Œä¼˜åŒ–ï¼Œä¹‹åä½¿ç”¨å¾ªç¯å±•å¼€ï¼Œæ€§èƒ½ä¼¼ä¹æœ‰æ­£å‘ä¼˜åŒ–ä½†æ˜¯æ•ˆæœä¸æ˜æ˜¾ï¼Œä¹‹åä½¿ç”¨MKLåº“å°è¯•ï¼Œæœ‰ä¸€ç‚¹æ­£å‘ä¼˜åŒ–ï¼Œæœ€åå°è¯•ä½¿ç”¨ä¸­é—´æ•°ç»„è¿›ä¸€æ­¥å‡å°‘å†…å­˜å­˜å–è¯•å›¾ä¼˜åŒ–ï¼Œå‘ç°æ˜¯è´Ÿä¼˜åŒ–ï¼Œå¯èƒ½æ˜¯çŸ©é˜µåˆ›å»ºå¼€é”€å¤ªå¤§ã€‚æ€»è€Œè¨€ä¹‹ï¼Œä¼¼ä¹C++æ–‡ä»¶ä»æœ‰åŠ é€Ÿç©ºé—´ï¼Œä½†å¯¹äºæˆ‘æ¥è¯´é»”é©´æŠ€ç©·äº†ï¼Œæ¥ä¸‹æ¥ä¼˜åŒ–ç‚¹å¯èƒ½åœ¨äºåº“å‡½æ•°çš„æ›´å¥½è°ƒç”¨ï¼Œèƒ½ä¸èƒ½ä½¿ç”¨å…¶ä»–æŒ‡ä»¤æ“ä½œå‘é‡ï¼Œå¹¶è¡Œæˆ–å¾ªç¯å±•å¼€æœ‰æ— å¹³è¡¡ç‚¹åœ¨ä¿è¯æ•°æ®æ­£ç¡®çš„åŸºç¡€ä¸Šç»§ç»­ä¼˜åŒ–ï¼Œæ˜¯å¦èƒ½ç”¨ä¸­é—´çŸ©é˜µæ›´å¥½åŠ é€Ÿè®¡ç®—...

å†è°ˆå…¶ä»–ï¼Œå¯¹äºè¿™ä¸ªé¡¹ç›®ï¼Œæœ€ç»ˆä¼˜åŒ–æ–¹æ¡ˆé‡‡å–äº†new_core_engine.pyä¸­çš„åšæ³•ï¼Œä½¿ç”¨äº†numpyåŒ…ä¸­çš„ç‰¹å®šå‡½æ•°ï¼Œåœ¨1000*1000000çš„æ•°æ®è¡¨ç°ä¸ŠåŠ é€Ÿäº†10å€ï¼Œå¹¶ä¸”æˆ‘ä»¬æ³¨æ„åˆ°C++åœ¨å°çŸ©é˜µä¸Šè¡¨ç°æ›´å¥½ã€‚

# å›æµ‹å¼•æ“ C/C++ ä¼˜åŒ–é¡¹ç›®

## ğŸ“‹ å¿«é€Ÿå¯¼èˆª

- **æ–°æ‰‹**: å…ˆè¯»æœ¬æ–‡æ¡£ï¼Œç„¶åçœ‹ `NAMING_CONVENTION.md` 
- **å¼€å‘**: å‚è€ƒ `task_spec.md` + `algorithm_doc.md` + `interface_spec.md`
- **æµ‹è¯•**: æŸ¥çœ‹ `test_cases/README.md` + `performance_benchmark.md`

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç†è§£ä¸¤ä¸ªç‰ˆæœ¬
- `reference_impl/core_engine.py` - ç®€åŒ–ç‰ˆï¼ŒåŒé‡å¾ªç¯ï¼Œç”¨äº C++ å¼€å‘å‚è€ƒ
- `reference_impl/core_engine_vectorized.py` - å‘é‡åŒ–ç‰ˆï¼ŒNumPy ä¼˜åŒ–ï¼Œç”¨äºæ€§èƒ½å¯¹æ¯”

è¯¦ç»†å¯¹æ¯”è§ `NAMING_CONVENTION.md`

### 2. å¼€å§‹å¼€å‘
```bash
# é˜…è¯»æ ¸å¿ƒæ–‡æ¡£
cat task_spec.md          # äº†è§£ä»»åŠ¡
cat algorithm_doc.md      # ç†è§£ç®—æ³•
cat interface_spec.md     # æŸ¥çœ‹æ¥å£
cat NAMING_CONVENTION.md  # å‘½åè§„èŒƒå’Œç‰ˆæœ¬å¯¹æ¯”

# å‚è€ƒå®ç°
cd reference_impl
python core_engine.py              # ç®€åŒ–ç‰ˆï¼ˆæ¨èå‚è€ƒï¼‰
python core_engine_vectorized.py   # å‘é‡åŒ–ç‰ˆï¼ˆæ€§èƒ½åŸºå‡†ï¼‰

## é¡¹ç›®èƒŒæ™¯

æœ¬é¡¹ç›®æ—¨åœ¨å°†ç°æœ‰çš„ Python å›æµ‹å¼•æ“ä¸­çš„æ€§èƒ½ç“¶é¢ˆéƒ¨åˆ†ä½¿ç”¨ C/C++ é‡å†™ï¼Œé€šè¿‡ Pybind11 æä¾› Python æ¥å£ï¼Œä»¥å®ç° 10-100 å€çš„æ€§èƒ½æå‡ã€‚

## é¡¹ç›®ç›®æ ‡

- **æ€§èƒ½æå‡**: æ ¸å¿ƒè®¡ç®—æ¨¡å—æ€§èƒ½æå‡ 10-100 å€
- **æ¥å£å…¼å®¹**: ä¿æŒä¸ç°æœ‰ Python ä»£ç çš„æ¥å£å…¼å®¹
- **å†…å­˜ä¼˜åŒ–**: ä¼˜åŒ–å†…å­˜ä½¿ç”¨ï¼Œæ”¯æŒå¤§è§„æ¨¡æ‰¹é‡è®¡ç®—
- **å¹¶è¡ŒåŒ–**: å……åˆ†åˆ©ç”¨å¤šæ ¸ CPUï¼Œæ”¯æŒ OpenMP/å¤šçº¿ç¨‹

## ä¼˜åŒ–èŒƒå›´

æœ¬é¡¹ç›®ä¸»è¦ä¼˜åŒ–ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š

### 1. å›æµ‹å¼•æ“æ ¸å¿ƒè®¡ç®— (Core Engine)
- æ–‡ä»¶ä½ç½®: `src/trader_backtest/engine/candle.py:run_multi_weight()`
- æ€§èƒ½ç“¶é¢ˆ: å¤šæƒé‡ç»„åˆçš„å‘é‡åŒ–å›æµ‹å¾ªç¯
- ä¼˜åŒ–ç›®æ ‡: 50-100x åŠ é€Ÿ

### 2. ä¿¡å·ç»„åˆè®¡ç®— (Signal Combination)  
- æ–‡ä»¶ä½ç½®: `src/trader_backtest/strategy/signal_strategy.py:process_dataframe()`
- æ€§èƒ½ç“¶é¢ˆ: ä¿¡å·çŸ©é˜µä¸æƒé‡çŸ©é˜µä¹˜æ³•ï¼Œé˜ˆå€¼åˆ¤æ–­
- ä¼˜åŒ–ç›®æ ‡: 10-20x åŠ é€Ÿ

### 3. ä¼˜åŒ–ç®—æ³•æ ¸å¿ƒå¾ªç¯ (Optimization Algorithms)
- æ–‡ä»¶ä½ç½®: `src/trader_backtest/optimizer/candle_weight_optimizer.py`
- æ€§èƒ½ç“¶é¢ˆ: æ‰¹é‡æƒé‡è¯„ä¼°ï¼Œæ¢¯åº¦è®¡ç®—
- ä¼˜åŒ–ç›®æ ‡: 30-50x åŠ é€Ÿ

## æ–‡æ¡£ç»“æ„

```
backtest_optimization_c/
â”œâ”€â”€ æ ¸å¿ƒæ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                    # é¡¹ç›®æ€»è§ˆï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ NAMING_CONVENTION.md         # å‘½åè§„èŒƒå’Œç‰ˆæœ¬å¯¹æ¯” â­
â”‚   â”œâ”€â”€ task_spec.md                 # ä»»åŠ¡è§„æ ¼è¯´æ˜ä¹¦
â”‚   â”œâ”€â”€ algorithm_doc.md             # ç®—æ³•é€»è¾‘è¯¦ç»†æ–‡æ¡£
â”‚   â”œâ”€â”€ interface_spec.md            # C++ æ¥å£å®šä¹‰è§„èŒƒ
â”‚   â””â”€â”€ performance_benchmark.md     # æ€§èƒ½åŸºå‡†æµ‹è¯•è¯´æ˜
â”‚
â”œâ”€â”€ reference_impl/                  # Python å‚è€ƒå®ç°
â”‚   â”œâ”€â”€ __init__.py                  # æ¨¡å—å¯¼å‡º
â”‚   â”œâ”€â”€ core_engine.py               # ç®€åŒ–ç‰ˆ - C++ å¼€å‘å‚è€ƒ
â”‚   â”œâ”€â”€ core_engine_vectorized.py    # å‘é‡åŒ–ç‰ˆ - æ€§èƒ½åŸºå‡† â­
â”‚   â”œâ”€â”€ signal_combination.py        # ä¿¡å·ç»„åˆé€»è¾‘
â”‚   â”œâ”€â”€ metrics.py                   # æ€§èƒ½æŒ‡æ ‡è®¡ç®—
â”‚   â””â”€â”€ optimization_kernel.py       # ä¼˜åŒ–ç®—æ³•æ ¸å¿ƒ
â”‚
â”œâ”€â”€ test_cases/                      # æµ‹è¯•ç”¨ä¾‹
â”‚   â”œâ”€â”€ README.md                    # æµ‹è¯•è¯´æ˜
â”‚   â”œâ”€â”€ generate_test_data.py        # ç”Ÿæˆæµ‹è¯•æ•°æ®
â”‚   â”œâ”€â”€ test_runner.py               # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ benchmark.py                 # æ€§èƒ½å¯¹æ¯”
â”‚   â””â”€â”€ view_results.py              # æŸ¥çœ‹è¾“å‡ºç»“æœ
â”‚
â””â”€â”€ output/                          # è¾“å‡ºç»“æœ
    â”œâ”€â”€ python_simple_output.npz     # ç®€åŒ–ç‰ˆè¾“å‡º
    â””â”€â”€ python_vectorized_output.npz # å‘é‡åŒ–ç‰ˆè¾“å‡º

cpp_implementation/                  # C++ å®ç°ç›®å½•ï¼ˆå¾…åˆ›å»ºï¼‰
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ backtest_engine.cpp          # å›æµ‹å¼•æ“ C++ å®ç°
â”‚   â”œâ”€â”€ signal_processor.cpp         # ä¿¡å·å¤„ç† C++ å®ç°
â”‚   â”œâ”€â”€ optimizer_kernel.cpp         # ä¼˜åŒ–å™¨ C++ å®ç°
â”‚   â””â”€â”€ bindings.cpp                 # Pybind11 ç»‘å®š
â”œâ”€â”€ include/
â”‚   â”œâ”€â”€ backtest_engine.h
â”‚   â”œâ”€â”€ signal_processor.h
â”‚   â””â”€â”€ optimizer_kernel.h
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_cpp.cpp                 # C++ å•å…ƒæµ‹è¯•
â”œâ”€â”€ CMakeLists.txt
â””â”€â”€ README.md
```

## æŠ€æœ¯è¦æ±‚

### å¿…é¡»æŠ€æœ¯æ ˆ
- **C++17** æˆ–æ›´é«˜ç‰ˆæœ¬
- **Pybind11** (ç”¨äº Python ç»‘å®š)
- **Eigen** æˆ– **ArrayFire** (çŸ©é˜µè¿ç®—åº“)
- **OpenMP** (å¯é€‰ï¼Œç”¨äºå¹¶è¡ŒåŒ–)

### ç¼–è¯‘è¦æ±‚
- CMake 3.15+
- GCC 9+ / Clang 10+ / MSVC 2019+
- æ”¯æŒ Linux å¹³å°ï¼ˆä¸»è¦ï¼‰å’Œ Windows å¹³å°ï¼ˆå¯é€‰ï¼‰

### æ€§èƒ½è¦æ±‚
- å•çº¿ç¨‹æ€§èƒ½æå‡ >= 10x
- å¤šçº¿ç¨‹æ€§èƒ½æå‡ >= 30x (4 æ ¸)
- å†…å­˜å ç”¨ <= Python å®ç°çš„ 1.5x

## äº¤ä»˜æ ‡å‡†

### ä»£ç è´¨é‡
- [ ] é€šè¿‡æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼ˆ100% é€šè¿‡ç‡ï¼‰
- [ ] æ•°å€¼ç²¾åº¦è¯¯å·® < 1e-6
- [ ] ä»£ç æ³¨é‡Šè¦†ç›–ç‡ >= 30%
- [ ] æ— å†…å­˜æ³„æ¼ï¼ˆValgrind æ£€æµ‹ï¼‰

### æ€§èƒ½æ ‡å‡†
- [ ] æ ¸å¿ƒè®¡ç®—æ€§èƒ½æµ‹è¯•è¾¾æ ‡ï¼ˆè¯¦è§ performance_benchmark.mdï¼‰
- [ ] å¤§è§„æ¨¡æ•°æ®æµ‹è¯•ï¼ˆ10000 æƒé‡ç»„åˆ x 1000 æ—¶é—´æ­¥ï¼‰

### æ–‡æ¡£è¦æ±‚
- [ ] C++ ä»£ç ç»“æ„è¯´æ˜
- [ ] æ¥å£ä½¿ç”¨æ–‡æ¡£
- [ ] ç¼–è¯‘å®‰è£…æŒ‡å—
- [ ] æ€§èƒ½æµ‹è¯•æŠ¥å‘Š

## è¯¦ç»†å¼€å‘æµç¨‹

### 1. ç†è§£ç°æœ‰é€»è¾‘
```bash
# é˜…è¯»æ ¸å¿ƒæ–‡æ¡£
cat README.md                    # é¡¹ç›®æ€»è§ˆ
cat NAMING_CONVENTION.md         # â­ å‘½åè§„èŒƒå’Œç‰ˆæœ¬å¯¹æ¯”
cat algorithm_doc.md             # ç®—æ³•è¯¦è§£
cat interface_spec.md            # æ¥å£å®šä¹‰
```

### 2. æŸ¥çœ‹å‚è€ƒå®ç°ï¼ˆä¸¤ä¸ªç‰ˆæœ¬ï¼‰
```bash
cd reference_impl

# ç®€åŒ–ç‰ˆ - ç”¨äº C++ å¼€å‘ï¼ˆæ¨èï¼‰
python core_engine.py

# å‘é‡åŒ–ç‰ˆ - ç”¨äºæ€§èƒ½å¯¹æ¯”ï¼ˆåŸç‰ˆé€»è¾‘ï¼‰
python core_engine_vectorized.py
```

### 3. è¿è¡Œæµ‹è¯•ç”¨ä¾‹
```bash
cd test_cases

# ç”Ÿæˆæµ‹è¯•æ•°æ®
python generate_test_data.py

# è¿è¡Œæµ‹è¯•å’ŒåŸºå‡†æµ‹è¯•
python test_runner.py
python benchmark.py

# æŸ¥çœ‹è¾“å‡ºç»“æœ
python view_results.py
```

### 4. å¼€å§‹ C++ å®ç°
```bash
# åˆ›å»º C++ é¡¹ç›®ç»“æ„
mkdir cpp_implementation
cd cpp_implementation

# æŒ‰ç…§ interface_spec.md å®ç°æ¥å£
# å‚è€ƒ core_engine.pyï¼ˆç®€åŒ–ç‰ˆï¼‰
# éªŒè¯ä¸ core_engine_vectorized.pyï¼ˆå‘é‡åŒ–ç‰ˆï¼‰çš„ä¸€è‡´æ€§
```

## è”ç³»æ–¹å¼

- æŠ€æœ¯é—®é¢˜: é€šè¿‡ GitLab Issue æé—®
- ä»£ç å®¡æŸ¥: æäº¤ Merge Request
- æ€§èƒ½é—®é¢˜: é™„å¸¦æ€§èƒ½æµ‹è¯•ç»“æœ

## å‚è€ƒèµ„æº

- Pybind11 æ–‡æ¡£: https://pybind11.readthedocs.io/
- Eigen æ–‡æ¡£: https://eigen.tuxfamily.org/
- NumPy C API: https://numpy.org/doc/stable/reference/c-api/
- OpenMP æ•™ç¨‹: https://www.openmp.org/

## ç‰ˆæœ¬å†å²

- v0.1.0 (2025-10-21): åˆå§‹ç‰ˆæœ¬ï¼Œé¡¹ç›®è§„æ ¼åˆ¶å®š
